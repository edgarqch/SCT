{% extends "base/base_site.html" %}

{% block title %} Lista Operadores Renovar {% endblock title %}

{% block js %}

{% endblock js %}
 
{% block content %}
<div class="right_col" role="main">
    <a class="btn btn-primary" href="{% url 'tecnico:operador_renovavion_listar' %}"><i class="fa fa-backward"></i>Volver</a>
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
            <h1>Operadores que necesitan renovación de tarjetas</h1>
            <br>
            <table class="table table-striped table-bordered prueba dt-responsive display nowrap jambo_table" cellpadding="0" width="100%">
                <thead>
                  <tr class="headings" >
                    <th  style="width: 15%;">ACCIONES</th>
                    <th  style="width: 55%;">NOMBRE</th>
                    <th  style="width: 30%;">RAZON SOCIAL</th>
                  </tr>
                </thead>
                <tbody>
                    {% if operadores %}
                    {% for operador in operadores %}
                    <tr>
                        <td>
                            {% if not operador.en_tramite %}
                            <a class="btn btn-success seleccionarOperador" op="{{ operador.id }}" href="#">Seleccionar</a>
                            {% else %}
                            <p style="color:orangered" >El operador esta Renovando tarjetas</p>
                            {% endif %}
                        </td>
                        <td>{{ operador.nombre }}</td>
                        <td>{{ operador.razon_social }}</td>
                    </tr>
                    {% endfor %}
                    {% else %}
                    <h1>No hay registros de Operadores</h1>
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>

    <form action="" method="POST" id="seleccionarOperadorRenovar">
        {% csrf_token %}
    </form>

</div>
{% endblock content %}
{% block javascripts %}
{{ block.super }}
<script src="/static/js/project.js"></script>
<script src="/static/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="/static/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<script src="/static/vendors/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="/static/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
<script src="/static/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
<script src="/static/vendors/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="/static/js/responsive.bootstrap.js"></script>
<script src="/static/vendors/datatables.net-scroller/js/dataTables.scroller.min.js"></script>
<!-- validator -->
<script src="/static/vendors/validator/validator.js"></script>
<script type="text/javascript">
$(function() {
    $('a[data-toggle="tab"]').on( 'shown.bs.tab', function (e) {
          //$.fn.dataTable.tables( {visible: true, api: true} ).columns.adjust();
        $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();
    });
    $('.prueba').DataTable({
        "scrollY":        "300px",
        "scrollCollapse": true,
        "paging":         true,
        "responsive":     true,
        "ordering":       true,
        "language": {
            "sProcessing":     "Procesando...",
            "sLengthMenu":     "Mostrar _MENU_ registros",
            "sZeroRecords":    "No se encontraron resultados",
            "sEmptyTable":     "Ningún dato disponible en esta tabla",
            "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
            "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
            "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
            "sInfoPostFix":    "",
            "sSearch":         "Buscar:",
            "sUrl":            "",
            "sInfoThousands":  ",",
            "sLoadingRecords": "Cargando...",
            "oPaginate": {
                "sFirst":    "Primero",
                "sLast":     "Último",
                "sNext":     "Siguiente",
                "sPrevious": "Anterior"
            },
            "oAria": {
                "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
                "sSortDescending": ": Activar para ordenar la columna de manera descendente"
            }
        }
    });

    $('.seleccionarOperador').on("click",function(){
        var id_operador = $(this).attr("op");
        $("#seleccionarOperadorRenovar").attr("action", "/tecnico/renovar/"+id_operador+"/");
        $("#seleccionarOperadorRenovar").submit();
    });

});
</script>
<style type="text/css">
.prueba{
  height: 150px;
}
</style>
{% endblock %}